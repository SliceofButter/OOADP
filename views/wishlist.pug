extends layout

block content
  if user
    .row
      .col-md-4
        .profilecenter
          img(style='border-radius: 50%', width='100', height='100', src="/profilepic/" + pic)
          .details
              h5.name  #{user.username}
              ul
                  li
      .col-md-8
        .card
          .card-header Bio           
          .card-body #{bio}         
        br
        br         
        ul#myTab.nav.nav-tabs(role='tablist')
          li.nav-item
            a#home-tab.nav-link(href='/profile/'+current) Listing          
          li.nav-item
            a#profile-tab.nav-link(href='#') Request          
          li.nav-item
            if user.username == current
              a#contact-tab.nav-link(href='/profile/'+current+'/wallet') Wallet     
          li.nav-item
            a#contact-tab.nav-link.active(href='#') Wishlist     
        #myTabContent.tab-content
          #home.tab-pane.fade.show.active(role='tabpanel', aria-labelledby='home-tab')
            .row
              if pic != null 
                each doc in docs
                  if current == doc.wisher
                    .div.col-md-3(id=doc._id)
                      .card 
                        img.card-img-top(style='height:200px;width:auto', src='/itempic/' + doc.itemimageupload, alt='Item')
                        .card-body
                          a(href='/productitem/' + doc.id)
                            p.card-title.text-center(style='height:50px')=doc.itemname
                          btn.btn.btn-danger(type='submit' value='Delete' style="margin-left:18%;margin-top:1px;" class="deleteBtn" id=doc._id) Delete
    script.
      $('.deleteBtn').click(function () {
          var record_num = this.id;
          $.ajax({
            url: 'http://localhost:3000/profile/a/wishlist/' + record_num,
            type: 'DELETE',
            success: function (result) {
              console.log(result.message);
              location.reload();
              //- var itemToRemove = '.div.col-md[id=' + record_num + ']';
              //- $(itemToRemove).remove();
            },
            error: function (result) {
              //- location.href = '/'
              //location.reload();
            }
          });
        });
